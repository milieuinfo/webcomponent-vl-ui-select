import{nativeVlElement,awaitUntil,define}from"/node_modules/vl-ui-core/dist/vl-core.min.js";import{vlFormValidation,vlFormValidationElement}from"/node_modules/vl-ui-form-validation/dist/vl-form-validation-all.min.js";import"/node_modules/vl-ui-select/lib/select.js";Promise.all([vlFormValidation.ready()]).then((()=>define("vl-select",VlSelect,{extends:"select"})));export class VlSelect extends(vlFormValidationElement(nativeVlElement(HTMLSelectElement))){static get readyEvent(){return"VlSelectReady"}static get _observedAttributes(){return vlFormValidation._observedAttributes().concat(["error","success"])}static get _observedChildClassAttributes(){return["block","disabled"]}connectedCallback(){this.classList.add("vl-select"),this._hasDressedAttribute?this.dress():(this._dressFormValidation(),this._setValidationParentAttribute())}get readyEvent(){return VlSelect.readyEvent}get _classPrefix(){return"vl-select--"}get _dressed(){return!!this.getAttribute(VlSelect._dressedAttributeName)}get _hasDressedAttribute(){return null!=this._dataVlSelectAttribute}get _dataVlSelectAttribute(){return this.getAttribute("data-vl-select")}static get _dressedAttributeName(){return"data-vl-select-dressed"}_successChangedCallback(e,t){this.__stateChangedCallback(t,"success")}_errorChangedCallback(e,t){this.__stateChangedCallback(t,"error")}__stateChangedCallback(e,t){null!=e?(async()=>{this._hasDressedAttribute||this._dressed?(await awaitUntil((()=>this._dressed)),this._wrapperElement.parentNode.classList.add("vl-input-field--"+t)):this.classList.add("vl-select--"+t)})():this._hasDressedAttribute||this._dressed?this._wrapperElement.parentNode.classList.remove("vl-input-field--"+t):this.classList.remove("vl-select--"+t)}__wrap(){const e=document.createElement("div");this._setValidationParentAttribute(e),this._wrapperElement.parentNode.insertBefore(e,this._wrapperElement),e.appendChild(this._wrapperElement)}__changeAttribute(e,t,s,i,l){const r=this.__lookupElement(e);super.__changeAttribute(r,t,s,i,l)}__lookupElement(e){return this._dressed?this._wrapperElement.parentElement:e}set choices(e){this._choices.setChoices(e,"value","label",!0)}set sortFilter(e){this._choices.config.sortFilter=e}set value(e){this._dressed?vl.select.setValueByChoice(this,e):super.value=e}get value(){return this.selectedOptions[0]?this.selectedOptions[0].value:""}get _choices(){return vl.select.selectInstances.find((e=>e.element===this))}get _wrapperElement(){return this._element.closest(".js-vl-select")}dress(e){setTimeout((()=>{this._dressed||(vl.select.dress(this,e),(async()=>{await this.ready(),this._copySlotAttribute(),this.__wrap(),this.disabled=!0,this._dressFormValidation(),this.dispatchEvent(new CustomEvent(this.readyEvent))})())}))}async ready(){await awaitUntil((()=>!0===this._dressed))}undress(){if(this._dressed)try{vl.select.undress(this._choices),vl.select.selectInstances.splice(vl.select.selectInstances.indexOf(this._choices))}catch(e){console.error("er liep iets fout bij de undress functie, controleer dat het vl-select element een id bevat! Foutmelding: "+e)}}enable(){vl.select.enable(this)}disable(){vl.select.disable(this)}removeActive(){vl.select.removeActive(this)}showDropdown(){vl.select.showDropdown(this)}hideDropdown(){vl.select.hideDropdown(this)}focus(){this._dressed?setTimeout((()=>{this._wrapperElement.focus(),this._wrapperElement.click()})):super.focus()}_copySlotAttribute(){const e=this.getAttribute("slot");this.removeAttribute("slot"),e&&this._wrapperElement.setAttribute("slot",e)}_dressFormValidation(){const e=this.dress;super._dressFormValidation(),this.dress=e}_setValidationParentAttribute(e){(e||this).setAttribute("data-vl-validate-error-parent","")}}